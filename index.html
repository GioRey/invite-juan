<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baby Shower Emma Sof√≠a</title>

    <!-- Meta descripci√≥n -->
    <meta name="description"
        content="Con el coraz√≥n lleno de alegr√≠a te invitamos a celebrar el Baby Shower de nuestra amada Emma Sof√≠a üë∂üíñ. Estamos viviendo una etapa muy especial y nos encantar√≠a compartir este momento tan bonito contigo. Fecha: 8 de febrero de 2026 a las 14:00 hrs. Lugar: Ignacio Comonfort #15, Col. Ampliaci√≥n San Pedro Xalpa, Azcapotzalco, CDMX. Tu presencia har√° este d√≠a a√∫n m√°s especial. ¬°Te esperamos con mucho cari√±o!">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://giorey.github.io/invite-juan/">
    <meta property="og:title" content="Baby Shower Emma Sof√≠a üéÄ">
    <meta property="og:description"
        content="Con el coraz√≥n lleno de alegr√≠a te invitamos a celebrar el Baby Shower de nuestra amada Emma Sof√≠a üë∂üíñ. Estamos viviendo una etapa muy especial y nos encantar√≠a compartir este momento tan bonito contigo. üìÖ 8 de febrero de 2026, 14:00 hrs. üìç Ignacio Comonfort #15, Azcapotzalco, CDMX. Tu presencia har√° este d√≠a a√∫n m√°s especial.">
    <meta property="og:image" content="https://giorey.github.io/invite-juan/emma_sofia.jpeg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="1200">
    <meta property="og:locale" content="es_MX">
    <meta property="og:site_name" content="Baby Shower Emma Sof√≠a">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://giorey.github.io/invite-juan/">
    <meta name="twitter:title" content="Baby Shower Emma Sof√≠a üéÄ">
    <meta name="twitter:description"
        content="Con el coraz√≥n lleno de alegr√≠a te invitamos a celebrar el Baby Shower de nuestra amada Emma Sof√≠a üë∂üíñ. Estamos viviendo una etapa muy especial y nos encantar√≠a compartir este momento tan bonito contigo. üìÖ 8 de febrero de 2026, 14:00 hrs. üìç Ignacio Comonfort #15, Azcapotzalco, CDMX.">
    <meta name="twitter:image" content="https://giorey.github.io/invite-juan/emma_sofia.jpeg">

    <!-- Favicon -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéÄ</text></svg>">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --soft-pink: #fdf2f7;
            --main-pink: #f472b6;
            --dark-pink: #ec4899;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background-color: var(--soft-pink);
            color: #4a4a4a;
            scroll-behavior: smooth;
            overflow: hidden;
            /* Bloqueado hasta que termine el juego */
        }

        .font-cursive {
            font-family: 'Dancing Script', cursive;
        }

        /* --- Pantalla Inicial de Juego --- */
        #intro-game {
            position: fixed;
            inset: 0;
            background: linear-gradient(to bottom, #fdf2f7, #ffe4e6);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            transition: opacity 0.8s ease-in-out;
        }

        #name-display {
            transition: transform 1s cubic-bezier(0.77, 0, 0.175, 1), opacity 0.8s ease;
            max-width: 100vw;
            padding: 0 10px;
        }

        .letter-slot {
            display: inline-block;
            width: 8.5vw;
            /* Ajuste fluido para m√≥vil */
            height: 12vw;
            margin: 0 1vw;
            border-bottom: 3px solid #f472b6;
            font-size: 7.5vw;
            /* Tipograf√≠a fluida para m√≥vil */
            font-family: 'Dancing Script', cursive;
            color: #ec4899;
            vertical-align: bottom;
            opacity: 0;
            transform: scale(0.5);
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @media (min-width: 640px) {
            .letter-slot {
                width: 55px;
                height: 75px;
                font-size: 4.5rem;
                margin: 0 8px;
                border-bottom-width: 4px;
            }
        }

        .letter-slot.revealed {
            opacity: 1;
            transform: scale(1);
            border-bottom-color: transparent;
            animation: softZoom 0.8s ease-out forwards;
        }

        @keyframes softZoom {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }

            50% {
                transform: scale(1.15);
                opacity: 1;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .letter-slot.space {
            border-bottom: none;
            width: 4vw;
            opacity: 1;
            transform: scale(1);
        }

        @media (min-width: 640px) {
            .letter-slot.space {
                width: 20px;
            }
        }

        .slot-underline {
            display: inline-block;
            position: relative;
        }

        .slot-underline::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 1px;
            right: 1px;
            height: 2px;
            background: #f472b6;
            border-radius: 2px;
            opacity: 0.4;
        }

        @media (min-width: 640px) {
            .slot-underline::after {
                height: 3px;
                left: 5px;
                right: 5px;
            }
        }

        .slot-underline.revealed::after {
            display: none;
        }

        .slot-underline.space::after {
            display: none;
        }

        .balloon-game {
            position: absolute;
            bottom: -150px;
            cursor: pointer;
            z-index: 1010;
            animation: rise linear forwards;
            user-select: none;
        }

        @keyframes rise {
            from {
                transform: translateY(0) rotate(0deg);
            }

            to {
                transform: translateY(-130vh) rotate(10deg);
            }
        }

        /* --- Estilos Fuegos Artificiales --- */
        .firework-particle {
            position: absolute;
            width: 7px;
            height: 7px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1100;
            animation: explode-particle 1.2s ease-out forwards;
        }

        @keyframes explode-particle {
            0% {
                transform: translate(0, 0) scale(1.5);
                opacity: 1;
            }

            100% {
                transform: translate(var(--tx), var(--ty)) scale(0);
                opacity: 0;
            }
        }

        /* --- Estilos Invitaci√≥n --- */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 1s ease-out;
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        .balloon-float {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0) rotate(-1deg);
            }

            50% {
                transform: translateY(-15px) rotate(1deg);
            }
        }

        .cloud {
            position: absolute;
            opacity: 0.3;
            animation: drift 30s linear infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes drift {
            from {
                transform: translateX(-100vw);
            }

            to {
                transform: translateX(100vw);
            }
        }

        .card-custom {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 40px;
            box-shadow: 0 10px 30px rgba(244, 114, 182, 0.05);
        }

        .btn-gradient {
            background: linear-gradient(135deg, #f472b6 0%, #ec4899 100%);
            box-shadow: 0 10px 20px rgba(244, 114, 182, 0.3);
            transition: all 0.3s ease;
        }

        .btn-gradient:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 25px rgba(244, 114, 182, 0.4);
        }

        /* Estilo para el nombre en el Hero que espera oculto */
        #hero-name {
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        #hero-name.visible {
            opacity: 1;
        }

        /* Control de Audio */
        #music-control {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 2000;
            background: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            border: 2px solid var(--main-pink);
            color: var(--main-pink);
            transition: all 0.3s ease;
        }

        #music-control:active {
            transform: scale(0.9);
        }
    </style>
</head>

<body class="overflow-x-hidden selection:bg-pink-200">

    <!-- Elemento de Audio -->
    <audio id="bg-music" loop preload="auto">
        <!-- PEGA TU ENLACE AQU√ç: Borra la URL de abajo y pon tu link directo que termine en .mp3 -->
        <source src="./song.mp3" type="audio/mpeg">
        <!--source src="https://giorey.github.io/invite-juan/song.mp3" type="audio/mpeg"-->
    </audio>

    <!-- Bot√≥n de Control de M√∫sica -->
    <div id="music-control" onclick="toggleMusic()">
        <span id="music-icon">üéµ</span>
    </div>

    <!-- Pantalla Inicial de Juego -->
    <div id="intro-game">
        <div id="game-content" class="z-20 px-4 w-full transition-all duration-700">
            <h2 id="intro-subtitle" class="text-pink-400 font-bold uppercase tracking-[0.3em] text-[10px] md:text-xs mb-12">Descubre el nombre de
                nuestra peque√±a</h2>

            <div id="name-display" class="mb-16 select-none flex justify-center flex-nowrap items-end overflow-visible">
                <!-- Generado por JS -->
            </div>

            <div id="game-status" class="text-pink-300 text-sm italic animate-pulse bg-white/40 inline-block px-6 py-2 rounded-full backdrop-blur-sm">
                üéà ¬°Revienta los globos para revelar el nombre! üéà
            </div>

            <div class="flex justify-center mt-12">
                <button id="start-main-btn" onclick="hideGame()"
                    class="hidden btn-gradient text-white px-10 py-5 rounded-full font-bold text-xl shadow-2xl scale-0 transition-all duration-500">
                    Comenzemos!
                </button>
            </div>
        </div>
        <!-- Contenedor para globos subiendo -->
        <div id="balloon-container" class="absolute inset-0 overflow-hidden pointer-events-none"></div>
    </div>

    <!-- Fondo de nubes -->
    <div class="fixed inset-0 pointer-events-none overflow-hidden h-full w-full">
        <div class="cloud text-7xl top-10 left-10" style="animation-delay: -2s;">‚òÅÔ∏è</div>
        <div class="cloud text-8xl top-60 right-20" style="animation-delay: -15s;">‚òÅÔ∏è</div>
        <div class="cloud text-6xl bottom-40 left-1/4" style="animation-delay: -8s;">‚òÅÔ∏è</div>
        <div class="cloud text-5xl top-1/2 right-1/4" style="animation-delay: -22s;">‚òÅÔ∏è</div>
    </div>

    <!-- Hero Section -->
    <header class="relative min-h-screen flex flex-col items-center justify-center p-6 text-center z-10">
        <div class="balloon-float mb-12">
            <div class="text-[100px] md:text-[140px] drop-shadow-xl">üéÄ</div>
        </div>
        <div class="reveal">
            <span class="text-pink-400 uppercase tracking-[0.4em] text-xs font-bold mb-4 block">Est√°s invitado</span>
            <!-- ID hero-name para sincronizar con el efecto hero -->
            <h1 id="hero-name" class="font-cursive text-7xl md:text-9xl text-pink-500 mb-6 drop-shadow-sm">Emma Sof√≠a</h1>
            <p class="text-pink-400 italic text-lg max-w-xs mx-auto mb-12">a mi Baby Shower</p>

            <!-- Flecha interactiva -->
            <button onclick="scrollToContent()"
                class="animate-bounce mt-10 text-pink-300 hover:text-pink-500 transition-colors cursor-pointer outline-none"
                aria-label="Ir al contenido">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                </svg>
            </button>
        </div>
    </header>

    <!-- Bienvenida Section -->
    <section id="bienvenida" class="relative py-20 px-6 z-10">
        <div class="max-w-xl mx-auto text-center reveal">
            <div class="relative inline-block mb-10">
                <div class="absolute -inset-4 border-2 border-dashed border-pink-200 rounded-full animate-[spin_30s_linear_infinite]"></div>
                <div class="w-64 h-64 md:w-72 md:h-72 rounded-full overflow-hidden border-8 border-white shadow-2xl relative z-10">
                    <img src="emma_sofia.jpeg" alt="Emma Sof√≠a" class="w-full h-full object-cover"
                        onerror="this.src='https://images.unsplash.com/photo-1544126592-807daa2b565b?auto=format&fit=crop&q=80&w=800'">
                </div>
                <div class="absolute -bottom-4 -right-4 text-6xl balloon-float">üéÄ</div>
            </div>
            <div class="card-custom p-8 md:p-12">
                <p class="text-gray-600 leading-relaxed italic text-xl mb-6">
                    "Con el coraz√≥n lleno de alegr√≠a queremos invitarte a celebrar el Baby Shower de nuestra amada Emma Sof√≠a üë∂üíñ"
                </p>
                <p class="text-gray-500 font-light">
                    Estamos viviendo una etapa muy especial y nos encantar√≠a compartir este momento tan bonito contigo.
                </p>
            </div>
        </div>
    </section>

    <!-- Fecha y Hora -->
    <section class="py-20 px-6 z-10 bg-white/30">
        <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-10 items-center reveal">
            <div class="text-center md:text-right space-y-4">
                <h3 class="font-cursive text-5xl text-pink-500">¬øCu√°ndo?</h3>
                <p class="text-gray-400 uppercase tracking-widest text-xs font-bold">Reserva el d√≠a</p>
            </div>
            <div class="card-custom p-10 text-center space-y-4 border-l-8 border-pink-300">
                <div class="text-4xl">üìÖ</div>
                <p class="text-2xl font-bold text-gray-700">8 de febrero de 2026</p>
                <p class="text-pink-500 font-bold text-3xl">14:00 hrs</p>
            </div>
        </div>
    </section>

    <!-- Ubicaci√≥n -->
    <section class="py-20 px-6 z-10">
        <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-10 items-center reveal">
            <div class="order-2 md:order-1 card-custom p-10 text-center space-y-4 border-r-8 border-pink-300">
                <div class="text-4xl">üìç</div>
                <p class="text-gray-700 font-bold leading-relaxed">
                    Ignacio Comonfort #15<br>
                    Col. Ampliaci√≥n San Pedro Xalpa<br>
                    Azcapotzalco, CDMX
                </p>
                <p class="text-xs text-gray-400 italic">
                    (Esquina con Calzada de la Naranja, a una cuadra de Av. de las Armas)
                </p>
                <div class="pt-6">
                    <a href="https://maps.app.goo.gl/FyE4wpDLn6dEa9oj6?g_st=aw" target="_blank"
                        class="btn-gradient inline-block text-white px-8 py-4 rounded-full font-bold text-sm tracking-widest">
                        ABRIR MAPA üìç
                    </a>
                </div>
            </div>
            <div class="order-1 md:order-2 text-center md:text-left space-y-4">
                <h3 class="font-cursive text-5xl text-pink-500">¬øD√≥nde?</h3>
                <p class="text-gray-400 uppercase tracking-widest text-xs font-bold">Te esperamos en:</p>
            </div>
        </div>
    </section>

    <!-- Regalos y Notas -->
    <section class="py-20 px-6 z-10 bg-pink-50/50">
        <div class="max-w-3xl mx-auto reveal space-y-12">
            <div class="text-center space-y-4">
                <h3 class="font-cursive text-5xl text-pink-500">Mesa de Regalos</h3>
                <p class="text-gray-500 italic max-w-md mx-auto">
                    "Con mucho cari√±o preparamos una lista en Amazon para quien desee consultarla:"
                </p>
            </div>

            <div class="card-custom p-8 md:p-12 text-center space-y-8">
                <div class="flex flex-col items-center gap-6">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/a/a9/Amazon_logo.svg" alt="Amazon" class="h-8 opacity-70">
                    <a href="https://www.amazon.com.mx/baby-reg/leydi-vlez-febrero-2026-ciudaddemexico/3NQ57VOIFAOCH" target="_blank"
                        class="btn-gradient text-white px-10 py-4 rounded-full font-bold shadow-lg">
                        VER LISTA AMAZON üéÅ
                    </a>
                </div>
                <div class="w-20 h-px bg-pink-100 mx-auto"></div>
                <p class="text-sm text-gray-400 leading-relaxed max-w-md mx-auto italic">
                    Si prefieres traer otro obsequio o si no te es posible, no te preocupes, tu presencia y tu cari√±o son lo m√°s importante para
                    nosotros üíï
                </p>
            </div>

            <!-- Secci√≥n de Bebidas -->
            <div class="card-custom bg-white/80 p-6 text-center reveal">
                <div class="text-3xl mb-3">ü•§ ü•Ç</div>
                <p class="text-pink-600 font-medium text-sm leading-relaxed px-4">
                    Habr√° bebidas sin alcohol; si deseas tomar alguna bebida alcoh√≥lica, puedes traerla con toda confianza.
                </p>
            </div>
        </div>
    </section>

    <!-- Confirmaci√≥n -->
    <section class="py-24 px-6 z-10 text-center">
        <div class="max-w-xl mx-auto reveal space-y-10">
            <div class="space-y-4">
                <h3 class="font-cursive text-6xl text-pink-500">Confirmaci√≥n üíå</h3>
                <p class="text-gray-500 font-light px-8 leading-relaxed">
                    Para organizarnos mejor, te pedimos con cari√±o nos confirmes tu asistencia.
                </p>
            </div>

            <div class="card-custom p-8 space-y-6">
                <a href="https://wa.me/525584767970?text=Hola!%20Confirmamos%20asistencia%20al%20Baby%20Shower%20de%20Emma%20Sofia%20üë∂üíñ"
                    class="flex items-center justify-center gap-3 bg-[#25D366] text-white py-5 rounded-3xl font-bold shadow-xl hover:bg-[#22c35e] transition-all transform hover:scale-105 active:scale-95">
                    <span>WHATSAPP AQU√ç</span>
                    <span class="text-xl">üí¨</span>
                </a>
                <p class="text-[10px] text-gray-400 uppercase tracking-widest font-bold italic">
                    Si no recibimos respuesta, entenderemos que no podr√°s acompa√±arnos.
                </p>
            </div>

            <div class="pt-10 space-y-8">
                <p class="text-pink-400 text-sm italic px-6 leading-relaxed">
                    ‚ú® Gracias por ser parte de nuestra historia y por acompa√±arnos en este momento tan lleno de amor. ‚ú®
                </p>
                <div class="w-16 h-px bg-pink-200 mx-auto"></div>
                <h4 class="font-cursive text-4xl text-pink-500">Te esperamos con todo nuestro cari√±o üë∂üíñ</h4>
            </div>
        </div>
    </section>

    <!-- Footer decorativo -->
    <footer class="py-10 text-center opacity-30 pointer-events-none">
        <div class="text-4xl">üíó‚òÅÔ∏èüéÄ</div>
    </footer>

    <script>
        const targetName = "Emma Sof√≠a";
        const nameDisplay = document.getElementById('name-display');
        const balloonContainer = document.getElementById('balloon-container');
        const startMainBtn = document.getElementById('start-main-btn');
        const gameStatus = document.getElementById('game-status');
        const heroName = document.getElementById('hero-name');
        const bgMusic = document.getElementById('bg-music');
        const musicIcon = document.getElementById('music-icon');

        let isMusicPlaying = false;

        // Intentar iniciar m√∫sica al cargar (puede fallar por pol√≠ticas de navegador)
        window.addEventListener('load', () => {
            bgMusic.play().then(() => {
                isMusicPlaying = true;
                musicIcon.innerText = "üîä";
            }).catch(() => {
                console.log("Autoplay bloqueado. Esperando interacci√≥n.");
            });
        });

        function toggleMusic() {
            if (isMusicPlaying) {
                bgMusic.pause();
                musicIcon.innerText = "üîá";
            } else {
                bgMusic.play();
                musicIcon.innerText = "üîä";
            }
            isMusicPlaying = !isMusicPlaying;
        }

        function playMusicOnInteraction() {
            if (!isMusicPlaying) {
                bgMusic.play().then(() => {
                    isMusicPlaying = true;
                    musicIcon.innerText = "üîä";
                });
            }
        }

        // Letras por revelar (sin espacios)
        let indicesToReveal = [];
        for (let i = 0; i < targetName.length; i++) {
            if (targetName[i] !== " ") indicesToReveal.push(i);
        }

        // Mezclar indices para revelaci√≥n aleatoria
        indicesToReveal.sort(() => Math.random() - 0.5);

        // Crear slots de letras
        for (let i = 0; i < targetName.length; i++) {
            const underline = document.createElement('span');
            underline.className = 'slot-underline';
            if (targetName[i] === " ") underline.classList.add('space');

            const slot = document.createElement('span');
            slot.className = 'letter-slot';
            slot.id = 'slot-' + i;
            if (targetName[i] === " ") {
                slot.classList.add('space');
                slot.innerText = "\u00A0";
            } else {
                slot.innerText = targetName[i];
            }
            underline.appendChild(slot);
            nameDisplay.appendChild(underline);
        }

        function triggerFirework(x, y) {
            const colors = ['#f472b6', '#ec4899', '#f9a8d4', '#fb923c', '#ffffff'];
            const particlesCount = 35;

            for (let i = 0; i < particlesCount; i++) {
                const p = document.createElement('div');
                p.className = 'firework-particle';
                const color = colors[Math.floor(Math.random() * colors.length)];
                p.style.backgroundColor = color;
                p.style.boxShadow = `0 0 10px ${color}`;

                p.style.left = x + 'px';
                p.style.top = y + 'px';

                const angle = Math.random() * Math.PI * 2;
                const dist = 60 + Math.random() * 150;
                p.style.setProperty('--tx', `${Math.cos(angle) * dist}px`);
                p.style.setProperty('--ty', `${Math.sin(angle) * dist}px`);

                document.getElementById('intro-game').appendChild(p);
                setTimeout(() => p.remove(), 1200);
            }
        }

        function createBalloon() {
            const balloon = document.createElement('div');
            balloon.className = 'balloon-game';
            balloon.style.pointerEvents = 'auto';
            const size = 60 + Math.random() * 40;

            const isPink = Math.random() > 0.3;
            const mainColor = isPink ? '#f472b6' : '#ffffff';
            const borderColor = isPink ? '#ffffff' : '#f472b6';
            const highlightColor = isPink ? '#fbcfe8' : '#fff5f7';

            balloon.innerHTML = `
                <div style="
                    width:${size}px; 
                    height:${size * 1.3}px; 
                    background: radial-gradient(circle at 30% 30%, ${highlightColor} 0%, ${mainColor} 70%); 
                    border-radius: 50% 50% 50% 50% / 40% 40% 60% 60%; 
                    position: relative; 
                    border: 3px solid ${borderColor};
                    box-shadow: inset -5px -10px 15px rgba(0,0,0,0.1), 0 10px 20px rgba(0,0,0,0.1);
                ">
                    <div style="position:absolute; bottom:-8px; left:50%; transform:translateX(-50%); width:0; height:0; border-left:8px solid transparent; border-right:8px solid transparent; border-bottom:12px solid ${mainColor}; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1));"></div>
                </div>
                <div style="width:2px; height:60px; background:rgba(0,0,0,0.08); margin:0 auto; border-radius:1px;"></div>
            `;

            balloon.style.left = (Math.random() * 85 + 5) + '%';
            balloon.style.animationDuration = (6 + Math.random() * 5) + 's';

            const handlePop = (e) => {
                playMusicOnInteraction(); // Activa m√∫sica al primer pop
                const rect = balloon.getBoundingClientRect();
                triggerFirework(rect.left + rect.width / 2, rect.top + rect.height / 2);
                balloon.remove();
                revealLetter();
            };

            balloon.addEventListener('mousedown', handlePop);
            balloon.addEventListener('touchstart', (e) => {
                e.preventDefault();
                handlePop();
            });

            balloonContainer.appendChild(balloon);
            setTimeout(() => { if (balloon.parentElement) balloon.remove(); }, 12000);
        }

        function revealLetter() {
            if (indicesToReveal.length > 0) {
                const index = indicesToReveal.pop();
                const slot = document.getElementById('slot-' + index);
                const underline = slot.parentElement;

                slot.classList.add('revealed');
                underline.classList.add('revealed');

                if (indicesToReveal.length === 0) {
                    endGame();
                }
            }
        }

        function endGame() {
            // Eliminamos el texto de bienvenida en el marcador
            if (gameStatus) gameStatus.style.display = 'none';

            // Fuegos artificiales finales
            let count = 0;
            const interval = setInterval(() => {
                const x = Math.random() * window.innerWidth;
                const y = Math.random() * window.innerHeight * 0.6;
                triggerFirework(x, y);
                count++;
                if (count >= 15) clearInterval(interval);
            }, 300);

            if (startMainBtn) {
                startMainBtn.classList.remove('hidden');
                setTimeout(() => {
                    startMainBtn.classList.remove('scale-0');
                }, 200);
            }
        }

        function hideGame() {
            playMusicOnInteraction(); // Asegura m√∫sica al entrar
            const intro = document.getElementById('intro-game');
            const introSubtitle = document.getElementById('intro-subtitle');

            // Calculamos las posiciones para el efecto hero
            const sourceRect = nameDisplay.getBoundingClientRect();
            const targetRect = heroName.getBoundingClientRect();

            // Ocultamos elementos secundarios de la carga (con seguridad)
            if (introSubtitle) introSubtitle.style.opacity = '0';
            if (startMainBtn) startMainBtn.style.opacity = '0';

            // Calculamos diferencias de escala y traslaci√≥n
            const scale = targetRect.width / sourceRect.width;
            const translateX = (targetRect.left + targetRect.width / 2) - (sourceRect.left + sourceRect.width / 2);
            const translateY = (targetRect.top + targetRect.height / 2) - (sourceRect.top + sourceRect.height / 2);

            // Aplicamos la transformaci√≥n hero al contenedor del nombre
            nameDisplay.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;

            // Desvanecemos el fondo
            intro.style.opacity = '0';

            setTimeout(() => {
                intro.style.display = 'none';
                document.body.style.overflow = 'auto';

                // Hacemos visible el nombre real del Hero
                heroName.classList.add('visible');

                // Activamos revelaciones de la invitaci√≥n
                document.querySelector('header .reveal').classList.add('active');
            }, 900);
        }

        function scrollToContent() {
            document.getElementById('bienvenida').scrollIntoView({
                behavior: 'smooth'
            });
        }

        const observerOptions = { threshold: 0.15 };
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) entry.target.classList.add('active');
            });
        }, observerOptions);

        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

        let balloonInterval = setInterval(createBalloon, 1000);
        startMainBtn.addEventListener('click', () => clearInterval(balloonInterval));
    </script>

</body>

</html>